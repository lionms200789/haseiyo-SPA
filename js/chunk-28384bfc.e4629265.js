(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28384bfc"],{8418:function(t,a,e){"use strict";var s=e("c04e"),o=e("9bf2"),c=e("5c6c");t.exports=function(t,a,e){var n=s(a);n in t?o.f(t,n,c(0,e)):t[n]=e}},"99af":function(t,a,e){"use strict";var s=e("23e7"),o=e("d039"),c=e("e8b5"),n=e("861d"),i=e("7b0b"),r=e("50c4"),l=e("8418"),u=e("65f0"),p=e("1dde"),d=e("b622"),f=e("2d00"),v=d("isConcatSpreadable"),h=9007199254740991,m="Maximum allowed index exceeded",_=f>=51||!o((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),C=p("concat"),y=function(t){if(!n(t))return!1;var a=t[v];return void 0!==a?!!a:c(t)},g=!_||!C;s({target:"Array",proto:!0,forced:g},{concat:function(t){var a,e,s,o,c,n=i(this),p=u(n,0),d=0;for(a=-1,s=arguments.length;a<s;a++)if(c=-1===a?n:arguments[a],y(c)){if(o=r(c.length),d+o>h)throw TypeError(m);for(e=0;e<o;e++,d++)e in c&&l(p,d,c[e])}else{if(d>=h)throw TypeError(m);l(p,d++,c)}return p.length=d,p}})},b83a:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),e("div",{staticClass:"cart"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-md-10"},[t._m(0),t.myCarts.final_total>0?e("table",{staticClass:"table cart-table"},[t._m(1),e("tbody",{staticClass:"cart-body"},t._l(t.myCarts.carts,(function(a){return e("tr",{key:a.id},[e("td",{staticClass:"px-0",attrs:{width:"5%",scope:"row"}},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goDetail(a.product_id)}}},[e("img",{staticClass:"img-fluid",staticStyle:{"min-width":"50px"},attrs:{src:a.product.imageUrl,alt:""}})])]),e("td",{attrs:{width:"25%"}},[e("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goDetail(a.product_id)}}},[e("p",[t._v(t._s(a.product.title))]),e("p",[t._v("尺寸 : "+t._s(a.size))])])]),e("td",{staticClass:"px-0",attrs:{width:"10%"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:a.qty,expression:"item.qty"}],staticClass:"productQty",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(a,"qty",e.target.multiple?s:s[0])},function(e){return t.modifyQty(a.id,a.qty,a.size,a.product_id)}]}},t._l(10,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a))])})),0)]),e("td",{attrs:{width:"10%"}},[t._v(t._s(t._f("currency")(a.total)))]),e("td",{attrs:{width:"10%"}},[t._v(t._s(t._f("currency")(a.final_total)))]),e("td",{attrs:{width:"5%"}},[e("a",{staticClass:"cartcross",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.delCartItem(a.id)}}},[e("i",{staticClass:"fas fa-times"})])])])})),0)]):t._e(),""==t.myCarts.carts?e("div",{staticClass:"py-5 text-center"},[t._m(2),t._v("購物車空空的唷 ! ")]):t._e(),e("div",{staticClass:"cart-total"},[e("div",{staticClass:"row border-bottom"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"input-group mb-3 coupon"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.couponCode,expression:"couponCode"}],staticClass:"form-control rounded-0 coupon-input",attrs:{type:"text",placeholder:"請輸入電子優惠券碼","aria-label":"Recipient's username","aria-describedby":"button-addon2"},domProps:{value:t.couponCode},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.getDiscount(a)},input:function(a){a.target.composing||(t.couponCode=a.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-dark rounded-0",attrs:{type:"button",id:"button-addon2"},on:{click:t.getDiscount}},[t._v("套用")])])]),e("p",{staticStyle:{"font-size":"13px",color:"#ff5252"}},[t._v(t._s(t.couponResponse))])]),e("div",{staticClass:"col-md-6"},[t.myCarts.final_total>=0?e("ul",{staticClass:"list-unstyled ml-auto text-left price-content"},[e("li",{staticClass:"price-item"},[e("span",[t._v("總金額 :")]),e("span",[t._v(t._s(t._f("currency")(t.myCarts.total)))])]),e("li",{staticClass:"price-item"},[e("span",[t._v("共折抵:")]),e("span",[t._v(t._s(t._f("currency")(t.myCarts.total-t.myCarts.final_total)))])]),t._m(3),e("li",{staticClass:"price-item"},[e("span",[t._v("應付金額 :")]),e("span",[t._v("NT"+t._s(t._f("currency")(t.myCarts.final_total)))])])]):t._e()])]),e("div",{staticClass:"row py-4 justify-content-end"},[e("div",{staticClass:"col-md-3 mb-2"},[e("router-link",{staticClass:"btn btn-outline-dark rounded-0 w-100",attrs:{to:"/product/t-shirt"}},[t._v("繼續逛逛")])],1),t.myCarts.final_total>1?e("div",{staticClass:"col-md-3 mb-2"},[e("a",{staticClass:"btn btn-dark rounded-0 w-100",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.gocheckout(a)}}},[t._v("前往結帳")])]):t._e()])]),e("div",{staticClass:"cart-total"})])])])],1)},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ul",{staticClass:"shop-steps list-unstyled d-flex"},[e("li",{staticClass:"active"},[e("span",[t._v("1.CHECK ORDER 確認購買清單")])]),e("li",[e("span",[t._v("2.SHIPPING ORDER 填寫訂單")])]),e("li",[e("span",[t._v("3.ALL DONE! 訂單完成")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",{staticClass:"cart-head"},[e("tr",[e("th",{staticClass:"px-0",attrs:{scope:"col"}}),e("th",{attrs:{scope:"col"}},[t._v("商品資訊")]),e("th",{staticClass:"px-0",attrs:{scope:"col"}},[t._v("數量")]),e("th",{attrs:{scope:"col"}},[t._v("價格")]),e("th",{attrs:{scope:"col"}},[t._v("折扣價")]),e("th",{attrs:{scope:"col"}})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("i",{staticClass:"fa fa-cart-arrow-down cart-info"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("li",{staticClass:"price-item"},[e("span"),e("span")])}],c=(e("99af"),{data:function(){return{isLoading:!1,myCarts:{},couponCode:"",couponResponse:""}},methods:{getCart:function(){var t=this;t.isLoading=!0;var a="".concat("https://vue-course-api.herokuapp.com","/api/").concat("haseiyo","/cart");t.$http.get(a).then((function(a){t.isLoading=!1,t.myCarts=a.data.data}))},delCartItem:function(t){var a=this,e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("haseiyo","/cart/").concat(t);a.$http.delete(e).then((function(){a.$bus.$emit("updateBag"),a.getCart()}))},goDetail:function(t){var a=this;a.$router.push("/productdetail/".concat(t))},getDiscount:function(){var t=this,a={code:t.couponCode},e="".concat("https://vue-course-api.herokuapp.com","/api/").concat("haseiyo","/coupon");t.$http.post(e,{data:a}).then((function(a){a.data.success?(t.couponResponse=a.data.message,t.getCart()):t.couponResponse=a.data.message}))},gocheckout:function(){var t=this,a=t.myCarts.carts.length;a>0&&t.$router.push("/customer/order_page")},modifyQty:function(t,a,e,s){var o=this,c={product_id:s,qty:a,size:e},n="".concat("https://vue-course-api.herokuapp.com","/api/").concat("haseiyo","/cart"),i="".concat("https://vue-course-api.herokuapp.com","/api/").concat("haseiyo","/cart/").concat(t);o.isLoading=!0,o.$http.all([o.$http.delete(i),o.$http.post(n,{data:c})]).then(o.$http.spread((function(){o.getCart()})))}},created:function(){this.getCart()}}),n=c,i=e("2877"),r=Object(i["a"])(n,s,o,!1,null,null,null);a["default"]=r.exports}}]);
//# sourceMappingURL=chunk-28384bfc.e4629265.js.map